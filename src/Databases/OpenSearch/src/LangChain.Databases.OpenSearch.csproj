<Project Sdk="Microsoft.NET.Sdk">

    <PropertyGroup>
        <TargetFrameworks>net4.6.2;netstandard2.0;net6.0;net7.0;net8.0</TargetFrameworks>
    </PropertyGroup>

    <PropertyGroup Label="NuGet">
        <Description>OpenSearch for LangChain.</Description>
        <PackageTags>$(PackageTags);opensearch</PackageTags>
    </PropertyGroup>

    <ItemGroup>
      <Compile Remove="Abstractions\**" />
      <Compile Remove="MemoryStorage\**" />
      <EmbeddedResource Remove="Abstractions\**" />
      <EmbeddedResource Remove="MemoryStorage\**" />
      <None Remove="Abstractions\**" />
      <None Remove="MemoryStorage\**" />
    </ItemGroup>

    <ItemGroup>
      <Compile Remove="Constants.cs" />
      <Compile Remove="ElasticsearchMemory.cs" />
      <Compile Remove="ElasticsearchMemoryRecord.cs" />
      <Compile Remove="ElasticsearchTag.cs" />
      <Compile Remove="FieldValue.cs" />
      <Compile Remove="FieldValueConverter.cs" />
      <Compile Remove="IIndexNameHelper.cs" />
      <Compile Remove="IndexNameHelper.cs" />
      <Compile Remove="IStringable.cs" />
      <Compile Remove="JsonSerializerOptionsExtensions.cs" />
      <Compile Remove="LazyJson.cs" />
      <Compile Remove="LazyJsonConverter.cs" />
      <Compile Remove="MemoryFilterExtensions.cs" />
      <Compile Remove="Refresh.cs" />
    </ItemGroup>

    <ItemGroup>
      <PackageReference Include="AWSSDK.OpenSearchServerless" />
      <PackageReference Include="AWSSDK.OpenSearchService" />
      <PackageReference Include="Microsoft.Extensions.Logging" />
      <PackageReference Include="OpenSearch.Client" />
      <PackageReference Include="OpenSearch.Net" />
      <PackageReference Include="OpenSearch.Net.Auth.AwsSigV4" />
      <PackageReference Include="System.Linq" />
      <PackageReference Include="System.Numerics.Tensors" />
    </ItemGroup>

    <ItemGroup>
      <ProjectReference Include="..\..\..\Core\src\LangChain.Core.csproj" />
    </ItemGroup>

    <ItemGroup Condition="'$(TargetFramework)' == 'net6.0'">
      <PackageReference Include="Amazon.CDK.AWS.OpenSearchServerless" />
    </ItemGroup>

    <ItemGroup Condition="'$(TargetFramework)' == 'net7.0'">
      <PackageReference Include="Amazon.CDK.AWS.OpenSearchServerless" />
    </ItemGroup>

    <ItemGroup Condition="'$(TargetFramework)' == 'net8.0'">
      <PackageReference Include="Amazon.CDK.AWS.OpenSearchServerless" />
    </ItemGroup>

</Project>
